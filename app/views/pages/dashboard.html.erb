<div class="container" style="margin-top: 10px;">
  <div class="row">
    <ul class="nav nav-pills justify-content-center mb-5">
      <li class="nav-item">
        <a class="nav-link active" data-bs-toggle="pill" href="#pending">Bookings for my equipment</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-bs-toggle="pill" href="#bookings">My Bookings</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-bs-toggle="pill" href="#equipment">My Equipment</a>
      </li>
    </ul>
  </div>

  <div class="tab-content">


    <div class="tab-pane container active" id="pending">
      <div class="dashboard-container pt-3">
        <% @equipments.each do |equipment| %>
          <% @all_bookings.each do |booking| %>
            <% if booking.equipment == equipment %>

              <div class="bg-white booking-card">

                <%= booking.equipment.name.capitalize %><br>Booked from: <%= booking.start_date.strftime("%b. %d") %> - <%= booking.end_date.strftime("%b. %d") %><br>
                Status: <div class="badge bg-<%= booking.status %>"><%= booking.status %></div>
                <br><br>

                <div class="d-flex justify-content-around">
                  <%= link_to booking_path(booking, decision: "accept"), data: { turbo_method: :patch }, class: "border rounded w-100 text-center mx-2 py-2 border-light" do %>
                    <i class="fa-solid fa-check text-success fs-4"></i>
                  <% end %>

                  <%= link_to booking_path(booking, decision: "reject"), data: { turbo_method: :patch }, class: "border rounded w-100 text-center mx-2 py-2 border-light" do %>
                    <i class="fa-solid fa-x text-danger fs-4"></i>
                  <% end %>
                </div>

              </div>

            <% end %>
          <% end %>
        <% end %>
      </div>
    </div>


    <div class="tab-pane container fade" id="bookings">
      <div class="row justify-content-center">
        <div class="col">
          <div class="dashboard-container pt-3">
            <% @bookings.each do |booking| %>
              <%= link_to equipment_path(booking.equipment), class: "dashboard-card" do %>
                <%= cl_image_tag booking.equipment.photos.first.key, class: "d-block w-100", alt: booking.equipment.name %>
                <div class="dashboard-card-infos">
                  <div>
                    <h2><%= booking.equipment.name.capitalize%></h2>
                  </div>
                  <div>
                    <p>Booked from: <%= booking.start_date %> to <%= booking.end_date %></p>
                  </div>
                </div>
              <% end %>
            <% end %>
          </div>
        </div>
      </div>
    </div>


    <div class="tab-pane container fade" id="equipment">
      <div class="dashboard-container pt-3">
        <% @equipments.each do |equipment| %>
          <%= link_to equipment_path(equipment), class: "card-trip" do %>
              <%= cl_image_tag equipment.photos.first.key, class: "d-block w-100", alt: equipment.name %>
            <div class="card-trip-infos">
              <div>
                <h2><%= equipment.name.capitalize%></h2>
                <p><%= equipment.description%></p>
              </div>
              <h2 class="card-trip-pricing">$<%= equipment.price %></h2>
            </div>
          <% end %>
        <% end %>
        <%= link_to "+", new_equipment_path, class: "card-new" %>
      </div>
    </div>


  </div>
</div>
